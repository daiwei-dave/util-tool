





marsOrg




级联关系：
		{
			orgNo:   10000158
			allName: 华北一区
			oneBranchList		
				[
					{	
						orgNo:   10000168
						allName: 河北分部
						twoBranchList							
							[
									{
										orgNo:   10000350
										allName: 保定分部
										storeList
										{
											[
												{
													orgNo:   10000220
													allName: 河北世纪商城
												},
												{
													orgNo:   10000239
													allName: 燕春商城
												}		
					
											]
										}
									},
									{
										orgNo:   10000466
										allName: 邯郸分部
									},
							]
							
						storeList							
								[
									{
										orgNo:   10000220
										allName: 河北世纪商城
									},
									{
										orgNo:   10000239
										allName: 燕春商城
									}				
								]																
					}，				
					{	
					orgNo:   10010566
					allName: 天津分部		
					}
				]			
		},
		
		{
			orgNo:   50000025
			allName: 华东大区
			branchList
				{
	
				orgNo:   10011523
				allName: 安徽分部		
				}，
				{
	
				orgNo:   10011808
				allName: 常州分部		
				}
				
		}  
	}
	
	
平行关系：






{
   storeList:[
	   {
			saleOrgNo: A20A,
			allName:  河北世纪商城,
			parentSaleOrgNo: HB00,
			parentLevelDetail: 16
	   },
	   {
			saleOrgNo: A22N,
			allName:  保定望都店,
			parentSaleOrgNo: 701,
			parentLevelDetail: 22
	   },
	   {
			saleOrgNo: A20A,
			allName:  河北世纪商城,
			parentSaleOrgNo: HB00,
			parentLevelDetail: 16
	   }  
   ],
   branchList:[
		{
			saleOrgNo: HB00,
			allName:  河北分部,
			parentSaleOrgNo: Z00002,
			parentLevelDetail: 10
	    },
		{
			saleOrgNo: 701,
			allName:  保定分部,
			parentSaleOrgNo: HB00,
			parentLevelDetail: 16
	    },
		{
			saleOrgNo: HB00,
			allName:  河北分部,
			parentSaleOrgNo: Z00002,
			parentLevelDetail: 10
	    } 
   ],
   regionList:[
		{
			saleOrgNo: Z00002,
			allName:  华北一区
	    },
		{
			saleOrgNo: Z00003,
			allName:  华东大区
	    } 
   ]
}



marsOrg
getSaleOrgNoCascade

提供大区，一级分部、二级分部、门店的销售组织编码级联关系

getBasic

empNo

SELECT
	*
FROM
	B_ORG
WHERE
	LEFT_NO >= 15
AND RIGHT_NO <= 87850
AND (
	STATE != 0
	OR STATE IS NULL
	OR STATE = ''
)
AND level_detail=16 OR level_detail=22 OR level_detail=10
ORDER BY
	level_detail 


大区 node_type 为2

查询分部的本级和父级 ， 过滤掉虚拟机构，共251条	

SELECT
	self.sale_org_no,
	self.all_name,
	parent.sale_org_no AS parentSaleOrgNo,
	parent.level_detail AS parentLevelDetail
FROM
	b_org self
LEFT JOIN b_org parent ON self.parent_no = parent.org_no
WHERE
	(
		self.level_detail = 16
		OR self.level_detail = 22
	)
AND (
	self.state != 0
	OR self.state IS NULL
	OR self.state = ''
)
AND self.sale_org_no is not NULL
AND self.sale_org_no !=''
AND self.is_virtual !='X'
AND self.node_type IS NULL
AND self.sale_org_no='D03'
ORDER BY
	self.sale_org_no






	
	
查询门店的本级和父级，过滤掉虚拟机构，共2499条	
SELECT
	self.sale_org_no,
	self.all_name,
	parent.sale_org_no AS parentSaleOrgNo,
	parent.level_detail AS parentLevelDetail
FROM
	b_org self
LEFT JOIN b_org parent ON self.parent_no = parent.org_no
WHERE
	(
		self.level_detail = 27
		OR self.level_detail = 28
	)
AND (
	self.state != 0
	OR self.state IS NULL
	OR self.state = ''
)
AND self.sale_org_no is not NULL
AND self.sale_org_no !=''
AND self.is_virtual !='X'
AND (parent.level_detail=22 OR parent.level_detail=16)
ORDER BY
	parentSaleOrgNo	
	
	
	
查询大区的本级和父级 ， 过滤掉虚拟机构，共6条		

SELECT
	self.sale_org_no,
	self.all_name,
	parent.sale_org_no AS parentSaleOrgNo,
	parent.level_detail AS parentLevelDetail
FROM
	b_org self
LEFT JOIN b_org parent ON self.parent_no = parent.org_no
WHERE
	(
		self.level_detail = 10
	)
AND (
	self.state != 0
	OR self.state IS NULL
	OR self.state = ''
)
AND self.sale_org_no is not NULL
AND self.sale_org_no !=''
AND self.is_virtual !='X'
ORDER BY
	parentSaleOrgNo	
	
	
	
	
	
	
	
	
	
查询本级、字集和父集
	
SELECT
	self.sale_org_no,
	self.all_name,
	parent.sale_org_no AS parentSaleOrgNo,
	parent.level_detail AS parentLevelDetail,
	children.sale_org_no AS childrenSaleOrgNo,
	children.level_detail AS childrenLevelDetail
FROM
	b_org self
LEFT JOIN b_org parent ON self.parent_no = parent.org_no
LEFT JOIN b_org children ON self.org_no = children.parent_no
WHERE
	(self.level_detail = 16 OR self.level_detail=22 OR self.level_detail=10)
AND (children.level_detail = 22 or children.level_detail=27 OR children.level_detail=28 OR children.level_detail = 16)
ORDER BY
	parentSaleOrgNo	

	
	