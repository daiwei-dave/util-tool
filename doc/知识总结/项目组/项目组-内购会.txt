



分析：
欠缺某些技术无法上手
框架其实并不难用，快等效于一个工具，优先使用开源框架而非公司内部框架
代码规范，简洁，高效，易读，能进行调试
所需技术：三大框架SSM与java基础
1.redis入门

cache


2.sql



3.mysql

java部分：
深入理解java基础，写接口实现，看的注解源码















邮箱：
daiwei3@gome.com.cn
Abcd345

微信密码：
dw2016@weixin

jenkins
daiwei3,Abcd345


小虫：
dw161114   a0g07k


jira：
daiwei3
123456
	
域账号：daiwei3
密码：Abcd456	


oa:daiwei3
密码：Abcd345	

电脑：
账号：daiwei
密码：dw916624



e激励系统
账号：dw161114
密码：VjSk4R

git密码,gitbub,GitLab密码:dw2016@git
微信公众平台密码：dw2016@weixin

博客园密码：2368804558@qq.com/dw2016@boke

码云：dw2016,密码nhce111

iteye：daiwei2017,密码：daiwei@iteye

http://10.112.70.1/manager/#/attendance?_k=bvxb79   工时系统
oracle账户：
账号：18428385839@163.com
密码：dw2017@Oracle


https://coding.net/user   账号：18428385839@163，密码：nhce111


http://code.taobao.org/   账号：daiwei2017，密码：nhce111



CSDN账号：账号：18428385839@163，密码:dw2017@csdn


http://imweb.corp.gome.com.cn/homepage/home.jsp   小虫下载链接


51cto :账号：18428385839  密码：dw2017@51cto


liuhaibing@gome.com.cn   刘海兵

fukui@gome.com.cn




3.sso 一个账号登陆gome所有相关的业务

需要更改的：

一。配置
1.wx.properties下：
添加
#dw 
wx.app_key=wx561380ddd6f8733d



2.mvc.properties下：
为
# mvc.properties dev

# 璁歌块扮琛?
mvc.domainCheck.defaultAllow=localhost,dw.gome.work,gome.dev

#zzy
#mvc.qrCode.urlPrefix=http://zlw.tesserae.gome.work

#zxf
mvc.qrCode.urlPrefix=http://dw.gome.work


server.xml改成这样，就可以省掉上下文
<Context docBase="gome-tesserae-web" path="/" reloadable="true" source="org.eclipse.jst.jee.server:gome-tesserae-web"/></Host>




action:基本的crud,及文件上传下载
sms:发送短信的文件代码
sso:单点登录
common：需要共用的代码


gome内部注解：

@DomainCheck  域名检测
@SessionCheck  如果未登陆或session已超时，需先进入登陆页面


领取入场券流程

1.扫描后判断是否为微信服务器：是，不做什么

否：

1.查找：
（该内购会id缓存是否存在，设置缓存，将该id内购会设置缓存）
2.查找：
（该app_key缓存是否存在，将该app_key的微信账户设置缓存）
对decript进行sha1加密




1.向手机端发送验证码(即点击获取验证码后)
1）.查找：（该内购会id缓存是否存在，设置缓存，将该id内购会设置缓存）
2）.查找该条件信息            ？？？（重复领取咋弄了）
SELECT *
FROM t_sms_verify_code
WHERE used_at IS NULL
	AND mobile = '18428385839'
	AND type = 'get_tesserae'
LIMIT 1
向数据库插入验证码等信息（但used_at为null）
INSERT INTO t_sms_verify_code (type, code, mobile, created_at, used_at)
VALUES ('get_tesserae', '446719', '18428385839', '2016-12-08 15:59:42.428', NULL)
3）.
查找：（该key缓存是否存在，设置缓存，将该key设置缓存）
SELECT t.value
FROM t_system_constant t
WHERE t.key = 'DO_SEND_SMS'
2.点击领取后
1.验证验证码
SELECT *
FROM t_sms_verify_code
WHERE used_at IS NULL
	AND mobile = '18428385839'
	AND code = '446719'
	AND type = 'get_tesserae'
LIMIT 1
2.
1）验证推荐人


2）验证内购会id和手机号
SELECT *
FROM t_internal_purchase_tesserae
WHERE internal_purchase_id = 108
	AND customer_mobile = '18428385839'
ORDER BY id
LIMIT 1

如果id和手机号在t_internal_purchase_tesserae存在，这为重复领取，？？？？？但却提示领取成功

查看推荐人编号
生成入场券编号，将入场券信息写入redis


更新used_at
UPDATE t_sms_verify_code
SET used_at = '2016-12-09 16:01:54.304'
WHERE id = 140


发送后
if(没有信息){
插入信息（除当时时间）}
else{//相当于输入验证码后提交
补充时间；
执行更新
}





内购会领券数据 ：满足内购会入场券的id=内购会id






内购会查看，
文件上传：内部已将接口封装
crud




数据导出：

//根据筛选结果导出数据
private void writeOnePageReportExcel(Page page, ReportBean reportBean, String filePath) throws IOException {
        Map<String, Object> params = null == reportBean ? new HashMap<String, Object>() : reportBean.toMap();
        List<ReportBean> reportBeans = empPositionService.listByCondition(params,page);
        new ExportExcel(null, ReportBean.class).setDataList(reportBeans).writeFile(filePath).dispose();
    }



//生成二维码
	@ResponseBody
    @RequestMapping("internal_purchase_qr_code")
    public void internalPurchaseQrCode(Integer id, HttpServletResponse response, HttpServletRequest request) {
        String url = qrCodeUrlPrefix + "/internal_purchase?id=" + id;

        log.info("internal_purchase_qr_code url=" + url);

        BitMatrix bitMatrix = WriterUtil.encodeUtf8UrlQrCode(url, 300, 300);
        MatrixToImageWriterUtil.writeToStream(bitMatrix, "png", ResponseUtil.getOutputStream(response));
    }



	
	
	
	
	
	
	
	
	
	
	
	
	



2.
在C:\Windows\System32\drivers\etc
修改host文件改成


# localhost name resolution is handled within DNS itself.
#	127.0.0.1       localhost
#	::1             localhost

	127.0.0.1       dw.gome.work





内购会项目常见问题

1.注解进行实体验证：

@Length(max=45,message="活动名称不能超过15个字符")  对应的是3倍关系

2.
class not found 进行必要的刷新就可validate

内购会自己所做的项目

1.改物理删除为逻辑删除
2.实体验证
3.活动统计


	
实体类：
InternalPurchase	：内购会入场券实体类 即包含了领取了入场券的用户的基本信息。
InternalPurchase	：内购会活动实体类 即包含了该活动的基本信息。
t_emp_position   ：	员工所在区域信息。
RecordSearchBean  ：内购会数据监测筛选参数的实体信息
ReportBean   ： 内购会数据报表的筛选参数的实体信息
t_report_statistics  ：静态组织报表


t_sms_verify_code:   用户领券时对应的用户与券信息





	
	


	
























	
	